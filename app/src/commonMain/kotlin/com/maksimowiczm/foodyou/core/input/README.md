copy of https://github.com/respawn-app/KMPUtils with generic error